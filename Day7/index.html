<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Users</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">

  <h2 class="text-center text-success mb-4">All Users Data</h2>
  <table class="table table-bordered text-center">
    <thead>
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Address</th>
        <th>Company Name</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="tdata"></tbody>
  </table>

<script>
var tableBody = document.getElementById("tdata")

function userData(user) {
    var tableRow = document.createElement("tr")

  
    var userId = document.createElement("td")
    userId.innerText = user.id

    var userName = document.createElement("td")
    userName.innerText = user.name

  
    var userAddress = document.createElement("td")
    userAddress.innerText = "city: " + user.address.city

    
    var userCompany = document.createElement("td")
    let com_page = document.createElement("a")
    com_page.href = "#"
    com_page.innerText = user.company.name
    com_page.onclick = function () {
        localStorage.setItem("company", JSON.stringify(user.company))
        window.location.href = "company.html"
    }
    userCompany.append(com_page)


    var tdBtns = document.createElement("td")
    tdBtns.classList.add('p-2')

    var btnShow = document.createElement("button")
    btnShow.innerText = "show"
    btnShow.classList.add('btn', 'btn-warning', 'm-2')
    btnShow.onclick = function () {
        localStorage.setItem("user", JSON.stringify(user))
        window.location.href = "user.html"
    }

    var btnDelete = document.createElement("button")
    btnDelete.innerText = "Delete"
    btnDelete.classList.add('btn', 'btn-danger', 'm-2')
    btnDelete.onclick = function () {
        tableRow.remove()
    }

    tdBtns.append(btnShow, btnDelete)
    tableRow.append(userId, userName, userAddress, userCompany, tdBtns)
    tableBody.append(tableRow)
}

async function getAllUsers() {
    try {
        var data = await fetch('https://jsonplaceholder.typicode.com/users?_limit=5')
        var usersData = await data.json()
        if (usersData && usersData.length > 0) {
            usersData.forEach(user => {
                userData(user)
            });
        }
    } catch (error) {
        console.log(error);
    }
}
getAllUsers()
</script>

</body>
</html>
